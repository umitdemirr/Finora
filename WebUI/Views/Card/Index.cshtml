@model BankCardViewModel
<link rel="stylesheet" href="~/css/dataTables.bootstrap4.css">
<link href="https://fonts.googleapis.com/css2?family=Mr+Dafoe&display=swap" rel="stylesheet">
<style>
    .card-container {
        perspective: 1000px;
    }

    .credit-card {
        background: linear-gradient(135deg, #1e88e5, #1565c0);
        border-radius: 15px;
        padding: 25px;
        width: 400px;
        height: 250px;
        position: relative;
        margin-bottom: 20px;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
        cursor: pointer;
        transform-style: preserve-3d;
        transform: translateZ(0);
        overflow: hidden;
    }

    .credit-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(45deg, rgba(255,255,255,0.1), rgba(255,255,255,0));
        pointer-events: none;
    }

    .bank-card {
        background: linear-gradient(135deg, #ff0000, #6d0500);
    }

    .virtual-card {
        background: linear-gradient(135deg, #7b1fa2, #4a148c);
    }

    .credit-card:hover {
        transform: translateY(-10px) rotateY(5deg);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
    }

    .card-chip {
        width: 45px;
        height: 35px;
        background: linear-gradient(135deg, #ffd700, #ffa000);
        border-radius: 8px;
        position: relative;
        margin-bottom: 20px;
    }

    .card-chip::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 75%;
        height: 75%;
        background: linear-gradient(135deg, #ffecb3, #ffd740);
        border-radius: 4px;
    }

    .card-number {
        font-family: 'Courier New', monospace;
        font-size: 1.4em;
        color: white;
        margin-bottom: 20px;
        letter-spacing: 2px;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
    }

    .card-details {
        display: flex;
        justify-content: space-between;
        color: rgba(255, 255, 255, 0.9);
        margin-top: 15px;
    }

    .card-details > div {
        flex: 1;
        margin-right: 15px;
    }

    .card-details > div:last-child {
        margin-right: 0;
    }

    .card-holder, .card-expires {
        font-size: 0.9em;
        text-transform: uppercase;
        letter-spacing: 1px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .card-type {
        position: absolute;
        top: 25px;
        right: 25px;
        height: 40px;
        display: flex;
        align-items: center;
    }

    .card-type img {
        height: 30px;
        width: auto;
    }

    .limit-info {
        position: absolute;
        margin-top: 40px;
        left: 25px;
        color: white;
    }

    .available-limit {
        font-size: 1.1em;
        font-weight: 500;
    }

    .limit-bar {
        position: absolute;
        bottom: 20px;
        left: 25px;
        right: 25px;
        height: 6px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 3px;
        overflow: hidden;
    }

    .limit-progress {
        height: 100%;
        background: rgba(255, 255, 255, 0.8);
        border-radius: 3px;
        transition: width 0.3s ease;
    }

    .card-actions {
        position: absolute;
        top: 15px;
        right: 15px;
        display: none;
        gap: 8px;
    }

    .credit-card:hover .card-actions {
        display: flex;
    }

    .action-btn {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        border-radius: 50%;
        width: 35px;
        height: 35px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        transition: all 0.3s;
        backdrop-filter: blur(5px);
    }

    .action-btn:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.1);
    }

   

    .add-card-btn {
        background: linear-gradient(45deg, var(--success), #43a047);
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 25px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: all 0.3s;
        font-weight: 500;
    }

    .add-card-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        color: white;
    }

    .card-limit {
        margin-top: 15px;
        background: var(--card-action-bg);
        border-radius: 10px;
        padding: 10px;
    }

    .card.shadow {
        background: var(--card-bg);
        color: var(--text-color);
    }

    .page-title {
        color: var(--text-color);
    }

</style>

<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-12">
            <div class="row align-items-center my-4">
                <div class="col">
                    <h2 class="h3 mb-0 page-title">Kartlarım</h2>
                </div>
                <div class="col-auto">
                    <button type="button" class="add-card-btn" data-toggle="modal" data-target="#addRequestModal">
                        <span class="fe fe-plus mr-2"></span>Kart Ekle
                    </button>
                </div>
            </div>
            <div class="row my-4">
                <div class="col-md-12">
                    <div class="card shadow">
                        <div class="card-body">
                            <ul class="nav nav-tabs mb-4" id="myTab" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="creditCard-tab" data-toggle="tab" href="#creditCard" role="tab">
                                        <i class="fe fe-credit-card mr-2"></i>Kredi Kartlarım
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="bankCard-tab" data-toggle="tab" href="#bankCard" role="tab">
                                        <i class="fe fe-credit-card mr-2"></i>Banka Kartlarım
                                    </a>
                                </li>
                            </ul>
                            <div class="tab-content" id="myTabContent">
                                <div class="tab-pane fade active show" id="creditCard" role="tabpanel">
                                    <div class="row">
                                        @foreach (var card in Model.CreditCardDetailList.Data)
                                        {
                                            <div class="col-md-4 col-lg-4">
                                                <div class="card-container">
                                                    <div class="credit-card">
                                                        <div class="card-chip"></div>
                                                        <div class="card-number">
                                                            <span class="mr-2">••••</span>
                                                            <span class="mr-2">••••</span>
                                                            <span class="mr-2">••••</span>
                                                            <span>@card.CardNumber.Substring(Math.Max(0, card.CardNumber.Length - 4))</span>
                                                        </div>
                                                        <div class="card-details">

                                                                <div>
                                                                    <div class="text-muted">KART SAHİBİ</div>
                                                                <div class="card-holder">@card.Name</div>
                                                                </div>
                                                                <div class="col-md-6">
                                                                     <div class="text-muted">SKT</div>
                                                                <div class="card-expires">@card.ExpiryDate</div>
                                                                </div>
                                                            <div>
                                                                <div class="limit-info">
                                                                <div class="text-muted small mb-1">Kullanılabilir Limit</div>
                                                                <div class="available-limit">@card.AvaliableLimit.ToString("N2") ₺</div>
                                                            </div>
                                                        </div>
                                                        </div>
                                                        <div class="card-type">
                                                           <h5 style="color:white">@card.Provider</h5>
                                                        </div>


                                                        <div class="limit-bar">
                                                            @{
                                                                var progress = card.Limit != 0 ? (card.AvaliableLimit / card.Limit) * 100 : 0;
                                                            }
                                                            <div class="limit-progress" style="width: @(progress.ToString("F2"))%"></div>

                                                        </div>
                                                        <div class="card-actions">
                                                            <button class="action-btn"
                                                                    data-toggle="modal"
                                                                    data-target="#ccUpdateModal"
                                                                    data-id="@card.Id"
                                                                    data-bankid="@card.BankId"
                                                                    data-name="@card.Name"
                                                                    data-cardnumber="@card.CardNumber"
                                                                    data-cardtype="creditcard"
                                                                    data-provider="@card.Provider"
                                                                    data-expirydate="@card.ExpiryDate"
                                                                    data-cvv="@card.CVV"
                                                                    data-cardlimit="@card.Limit"
                                                                    data-avaliablelimit="@card.AvaliableLimit">
                                                                <i class="fe fe-edit-2"></i>
                                                            </button>
                                                            <button class="action-btn" data-toggle="modal" data-target="#accountHistory" data-id="@card.Id">
                                                                <i class="fe fe-repeat"></i>
                                                            </button>
                                                            <button class="action-btn" data-toggle="modal" data-type="creditCard" data-target="#deleteModal" data-id="@card.Id">
                                                                <i class="fe fe-trash"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="bankCard" role="tabpanel">
                                    <div class="row">
                                        @foreach (var card in Model.BankCardDetailList.Data)
                                        {
                                            <div class="col-md-4 col-lg-4">
                                                <div class="card-container">
                                                    <div class="credit-card bank-card">
                                                        <div class="card-chip"></div>
                                                        <div class="card-number">
                                                            <span class="mr-2">••••</span>
                                                            <span class="mr-2">••••</span>
                                                            <span class="mr-2">••••</span>
                                                            <span>@card.CardNumber.Substring(Math.Max(0, card.CardNumber.Length - 4))</span>
                                                        </div>
                                                        <div class="card-details">
                                                            <div>
                                                                <div class="text-muted">KART SAHİBİ</div>
                                                                <div class="card-holder">@card.CardName</div>
                                                            </div>
                                                            <div>
                                                                <div class="text-muted">SKT</div>
                                                                <div class="card-expires">@card.ExpiryDate</div>
                                                            </div>
                                                        </div>
                                                        <div class="card-type">
                                                            <h5 style="color:white">@card.Provider</h5>
                                                        </div>
                                                        <div class="card-actions">
                                                            <button class="action-btn"
                                                                    data-toggle="modal"
                                                                    data-target="#dcUpdateModal"
                                                                    data-id="@card.Id"
                                                                    data-bankid="@card.BankId"
                                                                    data-cardnumber="@card.CardNumber"
                                                                    data-cardtype="Test"
                                                                    data-provider="@card.Provider"
                                                                    data-expirydate="@card.ExpiryDate"
                                                                    data-cvv="@card.CVV"
                                                                    data-cardlimit="@card.CardLimit"
                                                                    data-avaliablelimit="@card.AvaliableCardLimit">
                                                                <i class="fe fe-edit-2"></i>
                                                            </button>

                                                            <button class="action-btn" data-toggle="modal" data-target="#accountHistory" data-id="@card.Id">
                                                                <i class="fe fe-repeat"></i>
                                                            </button>
                                                            <button class="action-btn" data-toggle="modal" data-type="bankCard" data-target="#deleteModal" data-id="@card.Id">
                                                                <i class="fe fe-trash"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Ekleme Modal -->
<div class="modal fade" id="addRequestModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="card-header d-flex justify-content-between align-items-center">
                <strong>Kart Ekle</strong>
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="card-body">
                <ul class="nav nav-pills mb-3" id="pills-tab2" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="pills-home-tab1" data-toggle="pill" href="#pills1" role="tab" aria-controls="pills1" aria-selected="true">
                            <span class="fe fe-16 fe-credit-card"></span> Kredi Kartı
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="pills-profile-tab2" data-toggle="pill" href="#pills2" role="tab" aria-controls="pills2" aria-selected="false">
                            <span class="fe fe-16 fe-credit-card"></span> Banka Kartı
                        </a>
                    </li>
                </ul>
                <div class="tab-content" id="pills-tabContent2">
                    <!-- Kredi Kartı Formu -->
                    <div class="tab-pane fade show active" id="pills1" role="tabpanel">
                        <form action="@Url.Action("Add", "Card")" method="post">
                            <div class="col-12 col-xl-12">
                                <div class="form-row">
                                    <div class="form-group col-md-3">
                                        <label>Banka*</label>
                                        <select name="Card.BankId" class="form-control" required>
                                            <option value="">Banka Seçin...</option>
                                            @foreach (var bank in Model.Banks.Data)
                                            {
                                                if (bank.Type == "Banka")
                                                {
                                                    <option value="@bank.Id">@bank.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="simpleinput">Kart Adı</label>
                                        <input asp-for="Card.Name" type="text" id="simpleinput" class="form-control">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="custom-ipadd">Kart Numarası</label>
                                        <input asp-for="Card.Number" class="form-control input-creditcard" id="custom-ipadd" placeholder="____-____-____-____" maxlength="16">
                                    </div>
                                    <input name="Card.Type" value="creditcard" type="hidden" />
                                    <div class="form-group col-md-2">
                                        <label>SKT</label>
                                        <input asp-for="Card.ExpiryDate" class="form-control input-card-skt" placeholder="10/2029" required />
                                    </div>
                                    <div class="form-group col-md-1">
                                        <label>CVV</label>
                                        <input asp-for="Card.CVV" class="form-control input-card-cvv" required />
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-3">
                                        <label for="inputState5">Sağlayıcı Ağ</label>
                                        <select name="Card.Provider" id="inputState5" class="form-control">
                                            <option selected="">Seçin...</option>
                                            <option value="Mastercard">Mastercard</option>
                                            <option value="VISA">VISA</option>
                                            <option value="TROY">TROY</option>
                                            <option value="Paypal">Paypal</option>
                                            <option value="American Express">American Express</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label>Ekstre Kesim Günü</label>
                                        <input class="form-control" id="example-number" type="number" name="number">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="paraBirimi">Toplam Limit</label>
                                        <input asp-for="Card.Limit" class="form-control input-money" required />
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="paraBirimi">Kullanılabilir Limit</label>
                                        <input asp-for="Card.AvaliableLimit" class="form-control input-money" required />
                                    </div>
                                </div>
                                <div class="help-text text-muted">(*) Zorunlu alan</div>
                            </div>
                            <div class="card-footer text-right">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">İptal</button>
                                <button type="submit" class="btn btn-outline-success">
                                    <span class="fe fe-send mr-2"></span>Kaydet
                                </button>
                            </div>
                        </form>
                    </div>
                    <!-- Banka Kartı Formu -->
                    <div class="tab-pane fade" id="pills2" role="tabpanel">
                        <form action="@Url.Action("Add", "Card")" method="post">
                            <div class="col-12 col-xl-12">
                                <div class="form-row">
                                    <div class="form-group col-md-3">
                                        <label>Banka Hesabı</label>
                                        <select name="Card.AccountId" class="form-control" required>
                                            <option value="">Banka Hesabınızı Seçin...</option>
                                            @foreach (var account in Model.Accounts.Data)
                                            {
                                                <option value="@account.Id">@account.Name</option>
                                            }
                                        </select>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="simpleinput">Kart Adı</label>
                                        <input asp-for="Card.Name" type="text" id="simpleinput" class="form-control">
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="custom-ipadd">Kart Numarası</label>
                                        <input asp-for="Card.Number" class="form-control input-creditcard" id="custom-ipadd" placeholder="____-____-____-____" maxlength="16">
                                    </div>
                                    <input name="Card.Type" value="bankcard" type="hidden" />
                                    <div class="form-group col-md-3">
                                        <label for="inputState5">Sağlayıcı Ağ</label>
                                        <select name="Card.Provider" id="inputState5" class="form-control">
                                            <option selected="">Seçin...</option>
                                            <option value="Mastercard">Mastercard</option>
                                            <option value="VISA">VISA</option>
                                            <option value="TROY">TROY</option>
                                            <option value="Paypal">Paypal</option>
                                            <option value="American Express">American Express</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-3">
                                        <label>SKT</label>
                                        <input asp-for="Card.ExpiryDate" class="form-control input-card-skt" placeholder="10/2029" required />
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label>CVV</label>
                                        <input asp-for="Card.CVV" class="form-control input-card-cvv" required />
                                    </div>
                                </div>
                                <div class="help-text text-muted">(*) Zorunlu alan</div>
                            </div>
                            <div class="card-footer text-right">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">İptal</button>
                                <button type="submit" class="btn btn-outline-primary">
                                    <span class="fe fe-send mr-2"></span>Kaydet
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<!-- Güncelleme Modalı -->
<div class="modal fade" id="dcUpdateModal" tabindex="-1" role="dialog" aria-labelledby="updateModalLabel" aria-hidden="true" data-keyboard="false">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content card my-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <strong>Kart Bilgilerini Güncelle</strong>
                <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
            </div>
            <form action="@Url.Action("Update", "Card")" method="post">
                <div class="card-body">
                    <div class="container-fluid">
                        <div class="row justify-content-center">
                            <div class="col-12 col-xl-10">
                                <input asp-for="Card.Id" id="updateId" type="hidden">
                                <div class="form-row">
                                    <div class="form-group col-md-3">
                                        <label>Banka*</label>
                                        <select name="Card.BankId" id="updateBankId" class="form-control" required>
                                            <option value="">Banka Seçin...</option>
                                            @foreach (var bank in Model.Banks.Data)
                                            {
                                                <option value="@bank.Id">@bank.Name</option>
                                            }
                                        </select>
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="custom-ipadd">Kart Numarası</label>
                                        <input asp-for="Card.Number" class="form-control input-creditcard" id="updateCardNumber" placeholder="____-____-____-____" maxlength="16">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="inputState5">Sağlayıcı Ağ</label>
                                        <select name="Card.Provider" id="updateCardNetwork" class="form-control">
                                            <option selected="">Seçin...</option>
                                            <option value="Mastercard">Mastercard</option>
                                            <option value="VISA">VISA</option>
                                            <option value="TROY">TROY</option>
                                            <option value="Paypal">Paypal</option>
                                            <option value="American Express">American Express</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label>SKT</label>
                                        <input asp-for="Card.ExpiryDate" id="updateExpiryDate" class="form-control input-card-skt" placeholder="10/2029" required />
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label>CVV</label>
                                        <input asp-for="Card.CVV" id="updateCvv" class="form-control input-card-cvv" required />
                                    </div>
                                </div>
                                <div class="help-text text-muted">(*) Zorunlu alan</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-outline-success">
                        <span class="fe fe-send mr-2"></span>Kaydet
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Kredi Kartı Güncelleme Modalı -->
<div class="modal fade" id="ccUpdateModal" tabindex="-1" role="dialog" aria-labelledby="ccUpdateModalLabel" aria-hidden="true" data-keyboard="false">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content card my-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <strong>Kredi Kartı Bilgilerini Güncelle</strong>
                <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
            </div>
            <form action="@Url.Action("Update", "Card")" method="post">
                <div class="card-body">
                    <div class="container-fluid">
                        <div class="row justify-content-center">
                            <div class="col-12 col-xl-10">
                                <input asp-for="Card.Id" id="updateId" type="hidden">
                                <div class="form-row">
                                    <div class="form-group col-md-3">
                                        <label>Banka*</label>
                                        <select name="Card.BankId" id="updateBankId" class="form-control" required>
                                            <option value="">Banka Seçin...</option>
                                            @foreach (var bank in Model.Banks.Data)
                                            {
                                                <option value="@bank.Id">@bank.Name</option>
                                            }
                                        </select>
                                    </div>
                                     <div class="form-group col-md-3">
                                        <label>Kart Adı</label>
                                        <input asp-for="Card.Name" id="updateName" class="form-control" required />
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="custom-ipadd">Kart Numarası</label>
                                        <input asp-for="Card.Number" class="form-control input-creditcard" id="updateCardNumber" placeholder="____-____-____-____" maxlength="16">
                                    </div>
                                     <input asp-for="Card.Type" id="updateCardType" type="hidden">
                                    <div class="form-group col-md-3">
                                        <label for="inputState5">Sağlayıcı Ağ</label>
                                        <select name="Card.Provider" id="updateCardNetwork" class="form-control">
                                            <option selected="">Seçin...</option>
                                            <option value="Mastercard">Mastercard</option>
                                            <option value="VISA">VISA</option>
                                            <option value="TROY">TROY</option>
                                            <option value="Paypal">Paypal</option>
                                            <option value="American Express">American Express</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-3">
                                        <label>SKT</label>
                                        <input asp-for="Card.ExpiryDate" id="updateExpiryDate" class="form-control input-card-skt" placeholder="10/2029" required />
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label>CVV</label>
                                        <input asp-for="Card.CVV" id="updateCvv" class="form-control input-card-cvv" required />
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="paraBirimi">Limit</label>
                                        <input asp-for="Card.Limit" id="updateCardLimit" class="form-control input-money" required />
                                    </div>
                                    <div class="form-group col-md-3">
                                        <label for="paraBirimi">Kalan Limit</label>
                                        <input asp-for="Card.AvaliableLimit" id="updateAvaliableCardLimit" class="form-control input-money" required />
                                    </div>
                                </div>
                                <div class="help-text text-muted">(*) Zorunlu alan</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-outline-success">
                        <span class="fe fe-send mr-2"></span>Kaydet
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- Silme Modalı -->
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteLabel">Kart Sil</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">Sistemde kayıtlı kartınızı silmek üzeresiniz. Silmek istediğinizden emin misiniz?</div>

            <form method="post" asp-controller="Card" asp-action="Delete">
                <input type="hidden" id="deleteId" name="id" value="" />
                <input type="hidden" id="deleteType" name="type" value="" />
                <div class="modal-footer">
                    <button type="button" class="btn mb-2 btn-light" data-dismiss="modal">Kapat</button>
                    <button type="submit" class="btn mb-2 btn-outline-danger">Hesabımı Sil</button>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- Hesap Hareketleri Modalı -->
<div class="modal fade modal-slide" id="accountHistory" tabindex="-1" role="dialog" aria-labelledby="accountHistoryLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="accountHistoryLabel">Hesap Hareketleri</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body px-5">
                @foreach (var transaction in Model.Transactions.Data)
                {
                    <h6 class="text-uppercase text-muted mb-4">Today</h6>
                    <div class="pb-3 timeline-item item-primary">
                        <div class="mb-1"><strong>Brown Asher</strong><span class="text-muted small mx-2">Just create new layout Index, form, table</span><strong>Tiny Admin</strong></div>
                        <p class="small text-muted">
                            Creative Design <span class="badge badge-light">@transaction.Date</span>
                        </p>
                    </div>
                }

            </div>
        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://cdn.datatables.net/plug-ins/1.13.6/i18n/tr.json"></script>

<script>

    // Silme modalına id ve kart tipi gönder
    $(document).ready(function () {
        $('#deleteModal').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget);
            var accountId = button.data('id');
            var cardType = button.data('type');

            var modal = $(this);
            modal.find('#deleteId').val(accountId);
            modal.find('#deleteType').val(cardType);
        });
    });

    $('#ccUpdateModal').on('show.bs.modal', function (event) {
    var button = $(event.relatedTarget); 
    var modal = $(this);

    modal.find('#updateId').val(button.data('id'));
    modal.find('#updateBankId').val(button.data('bankid'));
    modal.find('#updateCardNumber').val(button.data('cardnumber'));
    modal.find('#updateName').val(button.data('name'));
    modal.find('#updateCardType').val(button.data('cardtype'));
    modal.find('#updateCardNetwork').val(button.data('provider'));
    modal.find('#updateExpiryDate').val(button.data('expirydate'));
    modal.find('#updateCvv').val(button.data('cvv'));
    modal.find('#updateCardLimit').val(button.data('cardlimit'));
    modal.find('#updateAvaliableCardLimit').val(button.data('avaliablelimit'));
});

     $('#dcUpdateModal').on('show.bs.modal', function (event) {
        var button = $(event.relatedTarget);
        var modal = $(this);

        modal.find('#updateId').val(button.data('id'));
        modal.find('#updateBankId').val(button.data('bankid'));
        modal.find('#updateCardNumber').val(button.data('cardnumber'));
        modal.find('#updateName').val(button.data('name'));
        modal.find('#updateCardType').val(button.data('cardtype'));
        modal.find('#updateCardNetwork').val(button.data('provider'));
        modal.find('#updateExpiryDate').val(button.data('expirydate'));
        modal.find('#updateCvv').val(button.data('cvv'));
        modal.find('#updateCardLimit').val(button.data('cardlimit'));
        modal.find('#updateAvaliableCardLimit').val(button.data('avaliablelimit'));
    });
</script>